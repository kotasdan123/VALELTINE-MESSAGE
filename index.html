<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>My QUEEN, can you be my Valentine's?</title>
    <style>
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #ffe4e1;
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
            margin: 0;
            padding: 10px;
            touch-action: none;
        }

        #trailCanvas {
            position: fixed;
            top: 0; left: 0;
            pointer-events: none;
            z-index: 999;
        }

        .container {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 25px 20px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(255, 77, 109, 0.3);
            z-index: 10;
            width: 100%;
            max-width: 350px;
        }

        .buttons { 
            margin-top: 20px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            gap: 15px;
            min-height: 200px;
        }

        button {
            padding: 15px 40px;
            font-size: 1.1rem;
            cursor: pointer;
            border: none;
            border-radius: 50px;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        #noBtn { 
            background-color: #888; 
            color: white; 
            position: relative; /* Starts relative, becomes fixed via JS */
            z-index: 1000;
            transition: all 0.15s ease-out;
        }

        #yesBtn { 
            background-color: #ff4d6d; 
            color: white; 
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        #musicControl {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 2000;
            background: white;
            border: 2px solid #ff4d6d;
            border-radius: 20px;
            padding: 5px 15px;
            font-size: 0.8rem;
        }

        .falling-item {
            position: fixed;
            top: -50px;
            pointer-events: none;
            z-index: 1;
            animation: fall linear forwards;
        }

        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }
        @keyframes crazySpin { to { transform: translateY(110vh) rotate(1440deg); } }
        
        .celebration, .secret-gift-panel { display: none; }
        .emoji-box { font-size: 3rem; display: block; margin-top: 10px; }
    </style>
</head>
<body onclick="startMusic()">

    <canvas id="trailCanvas"></canvas>
    <div id="musicControl">üéµ Music: Off</div>
    
    <audio id="bgMusic" loop preload="auto">
        <source src="https://assets.mixkit.co/music/preview/mixkit-uplifting-chiptune-game-music-440.mp3" type="audio/mpeg">
    </audio>

    <div class="container" id="card">
        <div id="content">
            <h1 style="color: #d00000;">My QUEEN, will you be my Valentine? üëë</h1>
            <p id="beggingText" style="color: #ff4d6d; font-weight: bold;">I'll be the best ever! ‚ú®</p>
            <div class="buttons">
                <button id="noBtn">No ü•∫</button>
                <button id="yesBtn">Yes! üòç</button>
            </div>
            <p style="font-weight: bold; color: #d00000;">Score: <span id="scoreVal">0</span></p>
        </div>

        <div id="message" class="celebration">
            <h1 style="color: #ff4d6d;">YES! ‚ù§Ô∏è</h1>
            <p>See you on Feb 14th, My Queen!</p>
            <span class="emoji-box">üíçüåπ‚ú®</span>
        </div>
    </div>

    <script>
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        const bgMusic = document.getElementById('bgMusic');
        const musicStatus = document.getElementById('musicControl');
        const scoreVal = document.getElementById('scoreVal');
        const beggingText = document.getElementById('beggingText');
        
        let score = 0;
        let musicStarted = false;

        // --- MUSIC ENGINE ---
        function startMusic() {
            if (!musicStarted) {
                bgMusic.play().then(() => {
                    musicStarted = true;
                    musicStatus.innerText = "üéµ Music: On";
                }).catch(e => console.log("Audio waiting for interaction"));
            }
        }

        // --- BUTTON EVASION ENGINE ---
        function moveNo() {
            if (score < 5) return; // Super easy at the very start

            // Switch to fixed positioning so it can escape the container
            noBtn.style.position = 'fixed';
            
            const padding = 50;
            const maxX = window.innerWidth - noBtn.offsetWidth - padding;
            const maxY = window.innerHeight - noBtn.offsetHeight - padding;
            
            const randomX = Math.random() * maxX + padding/2;
            const randomY = Math.random() * maxY + padding/2;

            noBtn.style.left = randomX + 'px';
            noBtn.style.top = randomY + 'px';
        }

        // Move when touched (Mobile)
        noBtn.addEventListener('touchstart', (e) => {
            if (score >= 10) {
                e.preventDefault();
                moveNo();
                updateScore();
            }
        });

        // Move when hovered (Desktop)
        noBtn.addEventListener('mouseover', () => {
            if (score >= 10) moveNo();
        });

        noBtn.onclick = () => {
            updateScore();
            moveNo();
        };

        function updateScore() {
            score++;
            scoreVal.innerText = score;
            
            // Make Yes bigger
            let scale = 1 + (score * 0.15);
            yesBtn.style.transform = `scale(${scale})`;

            if (score >= 30) beggingText.innerText = "CAT ATTACK! üê±";
            else if (score >= 20) beggingText.innerText = "Catch me! üèÉ‚Äç‚ôÇÔ∏è";
            else beggingText.innerText = "Wait, don't click that! üò±";
            
            if (score >= 30) spawnCat();
        }

        function spawnCat() {
            const cat = document.createElement('div');
            cat.className = 'falling-item';
            cat.innerHTML = 'üê±';
            cat.style.left = Math.random() * 100 + 'vw';
            cat.style.fontSize = (Math.random() * 20 + 20) + 'px';
            cat.style.animationDuration = (Math.random() * 2 + 2) + 's';
            if (score > 50) cat.style.animationName = 'crazySpin';
            document.body.appendChild(cat);
            setTimeout(() => cat.remove(), 4000);
        }

        yesBtn.onclick = () => {
            document.getElementById('content').style.display = 'none';
            document.getElementById('message').style.display = 'block';
            document.body.style.backgroundColor = '#ffb6c1';
        };

        // Initialize score
        scoreVal.innerText = score;
    </script>
</body>
</html>
